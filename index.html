<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Site Work Tracker</title>
  <!-- Description and PWA metadata -->
  <meta name="description" content="Site work PWA: schedule builder, vault tracker, and damage reports">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="theme-color" content="#202020">
  <link rel="stylesheet" href="styles.css">
  <!-- Override the topbar background to contrast with the red logo -->
  <style>
    /* Make the header dark so the red Liesfeld logo stands out. */
    .topbar {
      background: var(--liesfeld-black, #202020);
    }
    /* Ensure nav buttons remain readable against the darker header */
    .topbar .navbtn {
      color: var(--liesfeld-white, #ffffff);
    }

    /* Style for active nav buttons: red text and border for clarity against dark header */
    .topbar .navbtn.active {
      color: var(--liesfeld-red, #c73735);
      border-bottom: 2px solid var(--liesfeld-red, #c73735);
    }

    /* Hide the RIC3 vault editor container on all pages except the Vault page. */
    #vault-editor-container {
      display: none;
    }
    body[data-page="vault"] #vault-editor-container {
      display: block;
    }
  </style>

  <!-- Supabase JavaScript library for auth handling.  -->
  <!-- See https://supabase.com/docs/reference/javascript/initializing -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <div class="topbar">
    <img src="logo.png" alt="Liesfeld logo" class="logo" />
    <nav class="nav">
      <button class="navbtn" onclick="go('dashboard')" id="nav-dashboard">Dashboard</button>
      <button class="navbtn" onclick="go('schedule')" id="nav-schedule">Schedule</button>
      <button class="navbtn" onclick="go('damage')" id="nav-damage">Damage Reports</button>
      <button class="navbtn" onclick="go('vault')" id="nav-vault">Vaults</button>
      <!-- Placeholder for login/logout buttons. Auth.js will populate this element -->
      <div id="auth-nav" style="display:inline-block"></div>
    </nav>
  </div>

  <!-- Main content area populated by app.js -->
  <main id="main" tabindex="-1"></main>

  <!-- Container for RIC3 Telecom editor. This will be populated by ric3-telecom-editor.js -->
  <div id="vault-editor-container"></div>

  <!-- Load the RIC3 Telecom dataset and editor scripts -->
  <!-- Chart.js library for visualizing vault summary -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>

  <!-- Application scripts are loaded in a specific order: datasets, main app, auth, then editor. -->
  <script src="ric3-telecom-vaults.js"></script>
  <!-- Main application script defines the `go` router function and page rendering. -->
  <script src="app.js"></script>
  <!-- Authentication logic using Supabase. Depends on the Supabase library loaded in the head and the router defined in app.js. -->
  <script src="auth.js"></script>
  <!-- RIC3 Telecom editor must be loaded after the app so it can hook into the Vault page. -->
  <script src="ric3-telecom-editor.js"></script>
  <!-- Register service worker for offline capabilities -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('service-worker.js');
      });
    }
  </script>
</body>
</html>